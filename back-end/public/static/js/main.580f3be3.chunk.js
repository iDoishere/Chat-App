(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t){},132:function(e,t,n){},136:function(e,t,n){},140:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),s=n.n(o),l=(n(85),n(86),n(14)),c=n(15),i=n(17),u=n(16),m=n(11),g=n(18),d=n(12),f=n.n(d),p=n(21),h=n(7),E=(n(95),n(96),function(e){var t=e.allinfo,n="0"===t.color?"warning":"success";return r.a.createElement("div",null,t.show?r.a.createElement("div",{className:n+" banner"},r.a.createElement("h4",null,t.msgToUser)):null)}),b=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).serverUrl="http://localhost:3000",n.loginUser=function(){var e=Object(p.a)(f.a.mark(function e(t){var a,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.name&&""!==t.password){e.next=3;break}return n.displayLightBox("please fill in all fields","0"),e.abrupt("return");case 3:a=n.serverUrl+"/users/login",r="Basic ".concat(btoa("".concat(t.name,":").concat(t.password))),fetch(a,{method:"POST",headers:new Headers({Authorization:r})}).then(function(e){return e.json()}).then(function(e){e.autorized&&(n.props.userLoggedIn(t.name),n.setState({name:t.name}))}).catch(function(e){n.displayLightBox("Sign in","0")});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.getPass=function(e){n.setState({password:e.target.value})},n.getName=function(e){n.setState({name:e.target.value})},n.displayLightBox=function(e,t){var a={show:!0,msgToUser:e,color:t};n.setState({banner:a}),n.bannerTimeOut=setTimeout(function(){n.setState({banner:{show:!1,msgToUser:"",color:null}})},3e3)},n.state={password:"",name:"",ifUserLoggedIn:!1,banner:{show:!1,msgToUser:"",color:""}},n}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(h.f,null,r.a.createElement(h.i,{className:"divLogin"},r.a.createElement(h.e,{md:"6"},r.a.createElement(h.b,null,r.a.createElement(h.c,null,r.a.createElement(h.d,{className:"form-header deep-blue-gradient rounded"},r.a.createElement("h3",{className:"my-3"},r.a.createElement(h.g,{icon:"lock"})," Login:")),r.a.createElement("form",null,r.a.createElement("div",{className:"grey-text"},r.a.createElement(h.h,{onChange:this.getName,label:"Type your name",icon:"envelope",group:!0,type:"text",validate:!0,error:"wrong",success:"right"}),r.a.createElement(h.h,{onChange:this.getPass,label:"Type your password",icon:"lock",group:!0,type:"password",validate:!0})),r.a.createElement("div",{className:"text-center mt-4"},r.a.createElement(h.a,{outline:!0,color:"info",onClick:function(){var t=e.state.name,n={password:e.state.password,name:t};e.loginUser(n)}},"Send")))))))),r.a.createElement(E,{allinfo:this.state.banner}))}}]),t}(a.Component),v=n(79),O=n(30),S=n.n(O),w=n(19),y=n(78),j=(n(132),n(148)),k=n(155),L=n(145),U=n(146),x=n(147),N=n(143);var I=function(e){var t=e.userName;return r.a.createElement("div",null,r.a.createElement(N.a,{className:"justify-content-between"},t,"  "))},T=n(144);var C=function(e){var t=e.onlineUsers;return r.a.createElement("div",null,r.a.createElement(T.a,null,t.map(function(e,t){return r.a.createElement(I,{userName:e,key:t})})))},M=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={modal:!1},n}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.openModal,n=e.onlineUsers,a=e.toggle;return r.a.createElement("div",null,r.a.createElement(k.a,{isOpen:t,toggle:a},r.a.createElement(L.a,{toggle:a},"Online Users"),r.a.createElement(U.a,null,r.a.createElement(C,{onlineUsers:n})),r.a.createElement(x.a,null,r.a.createElement(h.a,{outline:!0,color:"info",onClick:a},"close"))))}}]),t}(a.Component),R="http://localhost:8080",B=function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=Object(p.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.initSocket(t),(a=S()(R)).emit("setToSocketOnLiNE",{user:n.state.userName}),a.emit("getallusers").on("sendallusers",function(e){n.setState({onlineUsers:e})});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.initSocket=Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=S()(R),n.setState({socket:t}),t.on("output",function(e){var t=Object(v.a)(n.state.messages),a={author:e.author,timestamp:new Date,text:e.text};t.push(a),n.setState({messages:t})}),t.on("onlineConnect",function(e){n.setState({onlineUsers:e})}),t.on("filter",function(e){n.setState({onlineUsers:e})});case 5:case"end":return e.stop()}},e)})),n.addNewMessage=function(e){var t=Object.assign({},e.message);t.author=n.user,n.sendMessageToSocket(t)},n.sendMessageToSocket=function(e){n.state.socket.emit(w.MSG,e)},n.state={text:"",messages:[],userName:localStorage.getItem("userdetails"),onlineUsers:[]};var a=Math.random().toString().split(".")[1];return n.user={id:a,name:n.state.userName},n}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.openModal,n=e.toggle,a=e.openModalBtn;return r.a.createElement("div",null,r.a.createElement("div",{className:"container-2"},r.a.createElement("div",{onClick:a,className:"btn btn-two"},r.a.createElement("span",null,"Online Users"))),r.a.createElement(j.a,null,r.a.createElement(M,{openModal:t,onlineUsers:this.state.onlineUsers,toggle:n}),r.a.createElement(y.a,{messages:this.state.messages,onMessageSend:this.addNewMessage,placeholder:"Type a message...",width:600})))}}]),t}(a.Component),P=n(25),A=n(26);function _(e,t){return G.apply(this,arguments)}function G(){return(G=Object(p.a)(f.a.mark(function e(t,n){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(n,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return e}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var D=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).serverUrl=window.location.origin,n.name=r.a.createRef(),n.pass=r.a.createRef(),n.rePass=r.a.createRef(),n.displayLightBox=function(e,t){var a={show:!0,msgToUser:e,color:t};n.setState({banner:a}),n.bannerTimeOut=setTimeout(function(){n.setState({banner:{show:!1,msgToUser:"",color:null}})},3e3)},n.clickedRegister=function(){var e=Object(p.a)(f.a.mark(function e(t){var a,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.serverUrl+"/users/register",e.next=3,_(t,a);case 3:(r=e.sent).info===w.MISSING_INPUT&&n.displayLightBox(r.info,w.FALSE),r.info===w.PASSWORD_LENGTH&&n.displayLightBox(r.info,w.FALSE),r.info===w.PASSWORD_MATCH&&n.displayLightBox(r.info,w.FALSE),r.info===w.USER_EXITS&&n.displayLightBox(r.info,w.FALSE),r.info===w.YOURE_IN&&n.displayLightBox(r.info,"1");case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.state={banner:{show:!1,msgToUser:"",color:""}},n}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(h.f,null,r.a.createElement(h.i,null,r.a.createElement(h.e,null,r.a.createElement(h.b,null,r.a.createElement(h.c,null,r.a.createElement("form",null,r.a.createElement("div",{className:"grey-text"},r.a.createElement(h.h,{ref:this.name,label:"Your name",icon:"user",group:!0,type:"text",validate:!0,error:"wrong",success:"right"}),r.a.createElement(h.h,{ref:this.pass,label:"Confirm your pass",icon:"exclamation-triangle",group:!0,type:"text",validate:!0,error:"wrong",success:"right"}),r.a.createElement(h.h,{ref:this.rePass,label:"Your password",icon:"lock",group:!0,type:"password",validate:!0})),r.a.createElement("div",{className:"text-center py-4 mt-3"},r.a.createElement(h.a,{onClick:function(){var t={name:e.name.current.state.innerValue,pass:e.pass.current.state.innerValue,rePass:e.rePass.current.state.innerValue};e.clickedRegister(t)},type:"button",gradient:"blue",rounded:!0,className:"btn-block z-depth-1a"},"Sign in")))))))),r.a.createElement(E,{allinfo:this.state.banner}))}}]),t}(a.Component),W=(n(136),n(149)),F=n(150),H=n(151),Y=n(152),z=n(153),J=n(154),V=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).toggle=n.toggle.bind(Object(m.a)(n)),n.state={isOpen:!1},n}return Object(g.a)(t,e),Object(c.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){var e=this.props,t=e.ifUserLoggedIn,n=e.userLoggedOut,a=t?"Logout":"Login";return r.a.createElement("div",null,r.a.createElement(W.a,{color:"light",light:!0,expand:"md"},r.a.createElement(F.a,{href:"/"},"Chat App"),r.a.createElement(H.a,{onClick:this.toggle}),r.a.createElement(Y.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(z.a,{className:"ml-auto",navbar:!0},r.a.createElement("div",{className:"allItems"},r.a.createElement(J.a,null,r.a.createElement(P.b,{to:"/",onClick:n},r.a.createElement(h.g,{icon:"arrow-circle-right mdb-gallery-view-icon"}),a)),r.a.createElement(J.a,null,r.a.createElement(P.b,{to:"/Register/"},r.a.createElement(h.g,{icon:"child mdb-gallery-view-icon"}),"Register")))))))}}]),t}(a.Component),X=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).endpoint="http://localhost:3001",n.openModalBtn=function(){n.setState({modal:!0})},n.userLoggedIn=function(e){localStorage.setItem("userdetails",e),localStorage.setItem("ifOnline",!0),n.setState({ifUserLoggedIn:!0,name:e})},n.userLoggedOut=function(){S()(n.endpoint).emit("logout",{user:n.state.name}),localStorage.clear(),n.setState({ifUserLoggedIn:!1,name:""})},n.state={name:"",modal:!1,ifUserLoggedIn:localStorage.getItem("ifOnline")||!1,box:{show:!1,msgToUser:""}},n.toggle=n.toggle.bind(Object(m.a)(n)),n}return Object(g.a)(t,e),Object(c.a)(t,[{key:"toggle",value:function(){this.setState({modal:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(P.a,null,r.a.createElement(V,{ifUserLoggedIn:this.state.ifUserLoggedIn,userLoggedOut:this.userLoggedOut}),r.a.createElement(A.b,{path:"/Register/",exact:!0,render:function(){return r.a.createElement(D,{clickedRegister:e.clickedRegister,allinfo:e.state.box})}}),r.a.createElement(A.b,{path:"/Chat/",exact:!0,render:function(){return r.a.createElement(B,{openModal:e.state.modal,openModalBtn:e.openModalBtn,toggle:function(){return e.toggle()}})}}),r.a.createElement(A.b,{path:"/",exact:!0,render:function(){return e.state.ifUserLoggedIn?r.a.createElement(A.a,{to:"/Chat/"}):r.a.createElement(b,{userLoggedIn:e.userLoggedIn})}})))}}]),t}(a.Component);var $=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(X,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(137),n(138),n(139);s.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},19:function(e,t){e.exports={MSG:"MSG",LOGIN:"LOGIN",MISSING_INPUT:"misssing inputs",PASSWORD_LENGTH:"Password must be 8 digits",PASSWORD_MATCH:"Password doesnt match",USER_EXITS:"user exits",YOURE_IN:"Youre In",FALSE:"0"}},80:function(e,t,n){e.exports=n(140)},85:function(e,t,n){},86:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){}},[[80,1,2]]]);
//# sourceMappingURL=main.580f3be3.chunk.js.map